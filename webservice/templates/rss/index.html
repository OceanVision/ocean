{% extends 'base/index.html' %}
{% block body %}

{% block navigator %}
    {% include "base/navigator.html" %}
{% endblock %}

<div id="rssItems" class="container" data-center_h="true" data-transit="true">
    <p class="header">TOP STORIES</p>
    <a id="sort" href="javascript:toggleItemsOrder()">unsorted</a>
    <input id="search" type="text" value="search in titles" data-value="search in titles">
    {% for item in rss_items %}
    <div class="item" title="{{ items.category }}">
        <span class="no"></span>
        <p class="title" data-color="{{ item.color }}">{{ item.title }}</p>
        <p class="description">
            {{ item.description|safe }}
        </p>
    </div>
    {% endfor %}
</div>

<script type="text/javascript">
    var itemsOrder = "unsorted";
    var toggleItemsOrder = function() {
        if (itemsOrder == "unsorted" || itemsOrder == "descending") {
            itemsOrder = "ascending"
        } else {
            itemsOrder = "descending"
        }

        main.sort($("#rssItems"), $("#rssItems div.item"), itemsOrder);
        $("div#rssItems a#sort")
                .removeClass("ascending descending")
                .addClass(itemsOrder)
                .text(itemsOrder);
    };

    $("div#rssItems input#search")
        .off("keyup")
        .on("keyup", function (e) {
            var pattern = $(this).val();
            if (pattern != $(this).data("value")) {
                main.searchInTitles(pattern);
            }
        });
</script>

{% endblock %}
